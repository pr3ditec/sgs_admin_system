import{d as y,u as E,r,o as N,i as V,w as o,f as S,b as l,a as g}from"./index-CtdWVGE4.js";import{b as x,a as n,m as $,v as i,f as k}from"./Validator-BLuEWHG9.js";import{R as c,a as B}from"./Response-Cdpp2_KF.js";import{_ as F}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-3w5KMU_p.js";import{_ as P}from"./FormLayout.vue_vue_type_script_setup_true_lang-Du2JUmel.js";import{_ as G}from"./SGSButton.vue_vue_type_script_setup_true_lang-DvxYfA5O.js";import{_ as u}from"./SGSInput.vue_vue_type_script_setup_true_lang-BSDmowQH.js";import{S as m}from"./SGSDivider-Cdrz1sw5.js";import{_ as I}from"./SGSSelect.vue_vue_type_script_setup_true_lang-D4rAraf9.js";const R={class:"flex-row"},H=y({__name:"CreateEquipmentView",setup(K){const f=E().request,t=r({isLoading:!1,isDisabled:!1}),d=r({isEmpty:!1,isDisabled:!1}),p=r({isEmpty:!1,isDisabled:!1}),_=r({isEmpty:!1,isDisabled:!1}),s=r({isEmpty:!1,notFound:!1,isDisabled:!0}),v=r([]),a=r({numero_serie:"",nome:"",tipo:"",cliente_id:0}),C=()=>{const e=i(d.value,a.value.numero_serie),h=i(p.value,a.value.nome),D=i(_.value,a.value.tipo),w=k(s.value,a.value.cliente_id);return h&&D&&w&&e},q=async()=>{await f.get("/cliente").then(e=>{e.status?(v.value=e.list,s.value.isDisabled=!1):s.value.notFound=!0})},b=async()=>{if(n(t.value,!0),!C())return n(t.value,!1);await f.store("/aparelho",a.value).then(e=>{e.status?c.show("success",e.messageCode):c.show("error",e.messageCode)}).catch(e=>{c.show("error","unexpected-error")}).finally(()=>{n(t.value,!1),$(a.value)})};return N(()=>{Promise.all([q()]).catch(e=>{console.log("Erro ao buscar dados de api")}),x("Enter",b)}),(e,h)=>(S(),V(F,null,{default:o(()=>[l(P,{title:"create-equipment",push:{label:"list-equipment",to:"/equipment/list"}},{body:o(()=>[g("div",R,[l(u,{class:"small-width1",label:"serial-number",required:"",reference:a.value,referenceName:"numero_serie",controller:d.value},null,8,["reference","controller"]),l(m),l(u,{class:"small-width",label:"name",required:"",reference:a.value,referenceName:"nome",controller:p.value},null,8,["reference","controller"]),l(m),l(u,{label:"type",required:"",reference:a.value,referenceName:"tipo",controller:_.value},null,8,["reference","controller"]),l(m)]),l(I,{label:"client",items:v.value,track:{field:"id",name:"nome"},controller:s.value,reference:a.value,referenceName:"cliente_id",required:""},null,8,["items","controller","reference"])]),handler:o(()=>[l(G,{onClick:b,label:"create-equipment",controller:t.value},null,8,["controller"])]),_:1})]),_:1}))}}),U=B(H,[["__scopeId","data-v-ad735bfa"]]);export{U as default};
