import{d as p,g as C,f as d,c as u,a as e,t as m,F as D,b as r,r as f,e as y,w as $,h as g,T as c,u as S,L,o as R,i as B}from"./index-BNyOiFiL.js";import{_ as N}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-BRCX2MGL.js";import{a as A,s as T,R as v}from"./Response-CbK6wia3.js";import{S as k}from"./SGSDivider-CUtS6Yak.js";import{g as q}from"./style-ngbkcXbr.js";import{_ as O}from"./SGSInput.vue_vue_type_script_setup_true_lang-CcE_Ue-L.js";const V={class:"text-2xl font-semibold"},j={class:"set-size charts-container"},z={class:"pie-wrapper progress style-2"},G={class:"label"},I=p({__name:"RadialProgressBar",props:{title:String,number:[String,Number],color:String},setup(i){C(a=>({"1ac9f6ce":i.color}));const s=i;return(a,t)=>(d(),u(D,null,[e("p",V,m(s.title),1),e("div",j,[e("div",z,[e("span",G,m(s.number),1),t[0]||(t[0]=e("div",{class:"pie"},[e("div",{class:"left-side half-circle"}),e("div",{class:"right-side half-circle"})],-1)),t[1]||(t[1]=e("div",{class:"shadow"},null,-1))])])],64))}}),x=A(I,[["__scopeId","data-v-dad2add5"]]),P={class:"border border-slate-200 dark:border-slate-900 shadow-md p-3 rounded h-full flex flex-row justify-around items-center"},U={class:"flex flex-col text-center"},E={class:"flex flex-col text-center"},F={class:"flex flex-col text-center"},M=p({__name:"SectionServiceDashboard",props:{parametros:Object},setup(i){const s=i;return(a,t)=>{var l,o,n;return d(),u("section",P,[e("div",U,[r(x,{title:"Total de serviços",number:(l=s.parametros)==null?void 0:l.total_ordem_servico,color:"#47b2b2"},null,8,["number"])]),e("div",E,[r(x,{title:"No mês atual",number:(o=s.parametros)==null?void 0:o.mes_atual,color:"#47b2b2"},null,8,["number"])]),e("div",F,[r(x,{title:"Ultimos 30 dias",number:(n=s.parametros)==null?void 0:n.ultimos_30_dias,color:"#47b2b2"},null,8,["number"])])])}}}),H={class:"flex flex-row gap-1"},J={class:"cursor-pointer w-20 flex flex-row gap-2"},K=["onClick"],Q=p({__name:"SGSTableDashboard",props:{search:String,isLoading:Boolean,header:Array,result:Array},emits:["updateData"],setup(i,{emit:s}){const a=i,t=s,l=f({value:""}),o=n=>{T({icon:"warning",text:c.to("update-service-order"),buttons:{confirm:{text:c.to("yes")}}}).then(_=>{_&&t("updateData",n)})};return y(),(n,_)=>(d(),u(D,null,[r(O,{reference:l.value,referenceName:"value"},null,8,["reference"]),r(k),r(g(q),{rowClass:"dark:bg-form-input dark:text-zinc-300 font-bold",skin:"none",sortable:!0,columns:a.header,loading:a.isLoading,rows:a.result,search:l.value.value},{actions:$(h=>[e("div",H,[e("span",J,[e("a",{onClick:b=>o(h.value.id),class:"cursor-pointer text-black-600 dark:text-blue-600 underline"},m(g(c).to("mark-as-updated")),9,K)])])]),_:1},8,["columns","loading","rows","search"])],64))}}),W={class:"border border-slate-200 dark:border-slate-900 shadow-md p-3 rounded h-full flex flex-col justify-start items-center"},X={class:"flex flex-col text-center mx-auto items-center"},Y={class:"text-2xl font-semibold"},Z={class:"w-full"},ee=p({__name:"SectionOlderServiceDashboard",props:{title:String,tableData:Array},emits:["refreshData"],setup(i,{emit:s}){const a=i,t=s,l=S().request,o=f({isLoading:!1}),n=f([{field:"ordem_servico",title:c.to("service-order"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"cliente",title:c.to("client"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"telefone",title:c.to("phone"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"actions",title:c.to("actions"),headerClass:"flex flex-row gap-1 font-bold uppercase"}]),_=async h=>{await l.update(`/dashboard/${h}`).then(b=>{b.status?(v.show("success","updated-service-date"),t("refreshData")):v.show("error","")}).catch(b=>{v.show("error","")})};return(h,b)=>{var w;return d(),u("section",W,[e("div",X,[e("p",Y,m(a.title),1),r(x,{number:(w=a.tableData)==null?void 0:w.length,color:"brown"},null,8,["number"])]),r(k),e("div",Z,[r(Q,{isLoading:o.value.isLoading,result:a.tableData,header:n.value,onUpdateData:_},null,8,["isLoading","result","header"])])])}}}),te={key:0},se={key:1,class:"flex flex-col gap-2 h-screen w-full"},ce=p({__name:"DashboardHomeView",setup(i){const s=L.getUser(),a=S().request;f(!1);const t=f([]),l=async()=>{await a.get("/dashboard").then(o=>{o.status&&(t.value=o.list)})};return R(()=>{Promise.all([l()]).catch(o=>{console.log("Erro ao inicializar a aplicação")})}),(o,n)=>(d(),B(N,null,{default:$(()=>[g(s).tipo=="ADMINISTRADOR"?(d(),u("main",te,m(g(c).to("admin-welcome")),1)):(d(),u("main",se,[r(M,{parametros:t.value.parametros},null,8,["parametros"]),r(ee,{onRefreshData:n[0]||(n[0]=()=>l()),title:"Serviços com mais de 6 meses",tableData:t.value.ordem_servico},null,8,["tableData"])]))]),_:1}))}});export{ce as default};
