import{_ as w}from"./SGSButton.vue_vue_type_script_setup_true_lang-C_9F_a-p.js";import{d as S,f as l,c as s,a as i,t as d,h as p,T as b,k as C,u as j,E as q,r as n,o as z,i as G,w as x,e as T,b as e,F as N,z as $}from"./index-BNyOiFiL.js";import{S as c}from"./SGSDivider-CUtS6Yak.js";import{_ as f}from"./SGSInput.vue_vue_type_script_setup_true_lang-CcE_Ue-L.js";import{R as m}from"./Response-CbK6wia3.js";import{_ as P}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-BRCX2MGL.js";import{_ as I}from"./FormLayout.vue_vue_type_script_setup_true_lang-CGibbbih.js";const M={class:"flex flex-col"},U={class:"mb-0.5 block text-black dark:text-zinc-200"},D=S({__name:"SGSCheckbox",props:{label:String,reference:Object,referenceName:String},setup(g){const r=g;return(u,a)=>(l(),s("div",M,[i("label",U,d(p(b).to(r.label)),1),a[2]||(a[2]=i("hr",{class:"dark:text-zinc-200 text-slate-200 mb-2 w-1/2"},null,-1)),r.reference[r.referenceName]?(l(),s("div",{key:0,onClick:a[0]||(a[0]=v=>r.reference[r.referenceName]=!1),class:"w-4/12 lg:w-1/12 cursor-pointer inline-flex bg-emerald-600 text-white rounded-md items-center justify-center gap-2.5 py-1 px-4 text-center font-medium hover:bg-opacity-90 lg:px-8 xl:px-10"},d(p(b).to("yes")),1)):C("",!0),r.reference[r.referenceName]?C("",!0):(l(),s("span",{key:1,onClick:a[1]||(a[1]=v=>r.reference[r.referenceName]=!0),class:"w-4/12 lg:w-1/12 cursor-pointer inline-flex bg-red text-white rounded-md items-center justify-center gap-2.5 py-1 px-4 text-center font-medium hover:bg-opacity-90 lg:px-8 xl:px-10"},d(p(b).to("no")),1))]))}}),A={key:0},H={key:1},J={class:"flex flex-row gap-5"},K={class:"w-full rounded border-[1.5px] text-black border-stroke py-3 px-5 font-normal outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:text-white dark:border-form-strokedark bg-white dark:bg-form-input dark:focus:border-primary"},Q={class:"flex flex-row gap-3"},le=S({__name:"ProfileServiceOrderView",setup(g){const r=j().request,u=q().params.id,a=T(),v=n({isDisabled:!0,isEmpty:!1}),h=n({isDisabled:!0,isEmpty:!1}),E=n({isDisabled:!0,isEmpty:!1}),_=n({notFound:!1,isLoading:!0}),L=n({isDisabled:!1,isLoading:!1}),R=n({isDisabled:!1,isLoading:!1}),t=n({}),B=async()=>{await r.get(`/ordem-servico/${u}`).then(o=>{o.status?t.value=o.list:_.value.notFound=!0}).finally(()=>{_.value.isLoading=!1})},F=async()=>{await r.update(`/ordem-servico/${u}`,{recebido:t.value.recebido,concluido:t.value.concluido}).then(o=>{if(o.status)m.show("success","success");else throw new Error}).catch(o=>{m.show("error","update-os-error"),console.log("Erro")})},O=async()=>{await r.destroy(`/ordem-servico/${u}`).then(o=>{o.status?m.show("success",o.messageCode):m.show("error",o.messageCode)}).finally(()=>{setTimeout(()=>a.push("/service-order/list"),2)})};return z(()=>{Promise.all([B()]).catch(o=>{console.log("Erro ao buscar dados de api....")})}),(o,y)=>(l(),G(P,null,{default:x(()=>[e(I,{title:"profile-service-order",push:{label:"list-service-order",to:"/service-order/list"}},{body:x(()=>[_.value.isLoading?(l(),s("div",A,"loading ...")):(l(),s("div",H,[e(f,{label:"number",reference:t.value,referenceName:"numero",controller:v.value,disabled:""},null,8,["reference","controller"]),e(c),e(f,{label:"client",reference:t.value,referenceName:"nome",controller:h.value,disabled:""},null,8,["reference","controller"]),e(c),e(f,{label:"price",reference:t.value,referenceName:"valor",controller:E.value,disabled:""},null,8,["reference","controller"]),e(c),i("div",J,[e(D,{label:"finished",reference:t.value,referenceName:"concluido"},null,8,["reference"]),e(D,{label:"payed",reference:t.value,referenceName:"recebido"},null,8,["reference"])]),e(c),(l(!0),s(N,null,$(t.value.equipamentos,k=>(l(),s("div",null,[e(f,{label:"equipment",reference:k,referenceName:"nome",controller:h.value,disabled:""},null,8,["reference","controller"]),e(c),i("select",K,[i("option",null,d(p(b).to("services")),1),(l(!0),s(N,null,$(k.servicos,V=>(l(),s("option",null,d(V.descricao),1))),256))]),y[0]||(y[0]=i("hr",{class:"hr"},null,-1))]))),256))]))]),handler:x(()=>[i("div",Q,[e(w,{onClick:F,label:"update",controller:L.value},null,8,["controller"]),e(w,{onClick:O,label:"delete",controller:R.value,overlayClass:"bg-slate-700"},null,8,["controller"])])]),_:1})]),_:1}))}});export{le as default};
