import{d as _,u as g,r as o,T as l,o as h,i as b,w as n,e as w,f as x,b as d,h as C}from"./index-DlXReHYW.js";import{R as m}from"./Response-Degt4AJ1.js";import{_ as L}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-CMILcdRT.js";import{_ as v}from"./SGSTable.vue_vue_type_script_setup_true_lang-Btn_6s8H.js";import{_ as D}from"./FormLayout.vue_vue_type_script_setup_true_lang-2C9QneGZ.js";import"./style-Gbs5m0IT.js";import"./SGSInput.vue_vue_type_script_setup_true_lang-B8Bwi16F.js";import"./SGSDivider-Bofd5NDC.js";const V=_({__name:"ListPermissionView",setup(y){const p=w(),t=g().request,a=o({isLoading:!1}),u=o([{field:"id",title:"#",headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"nome",title:l.to("name"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"actions",title:l.to("actions"),headerClass:"flex flex-row gap-1 font-bold uppercase"}]),r=o([]),i=async()=>{a.value.isLoading=!0,await t.get("/permissao").then(e=>{e.status&&(r.value=e.list)}).finally(()=>{a.value.isLoading=!1})},f=async e=>{await t.destroy(`/permissao/${e}`).then(s=>{s.status?(i(),m.show("success",s.messageCode)):m.show("error",s.messageCode)})};return h(()=>{Promise.all([i()]).catch(e=>{console.log("Erro em buscar dados da api")})}),(e,s)=>(x(),b(L,null,{default:n(()=>[d(D,{title:"permission",push:{label:"create-permission",to:"/permission/create"},back:{label:"add-permission",to:"/permission/add"}},{body:n(()=>[d(v,{result:r.value,isLoading:a.value.isLoading,header:u.value,onEditData:s[0]||(s[0]=c=>C(p).push(`/permissao/${c}`)),onDeleteData:f},null,8,["result","isLoading","header"])]),_:1})]),_:1}))}});export{V as default};
