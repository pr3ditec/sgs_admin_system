import{d as E,u as g,r as s,o as q,i as N,w as t,f as P,b as r}from"./index-CtdWVGE4.js";import{R as i}from"./Response-Cdpp2_KF.js";import{b as S,a as n,e as U,v as b,d as V,f as $}from"./Validator-BLuEWHG9.js";import{_ as k}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-3w5KMU_p.js";import{_ as x}from"./FormLayout.vue_vue_type_script_setup_true_lang-Du2JUmel.js";import{_ as F}from"./SGSButton.vue_vue_type_script_setup_true_lang-DvxYfA5O.js";import{_ as h}from"./SGSInput.vue_vue_type_script_setup_true_lang-BSDmowQH.js";import{_ as B}from"./SGSPassword.vue_vue_type_script_setup_true_lang-BMIfVsje.js";import{S as u}from"./SGSDivider-Cdrz1sw5.js";import{_ as G}from"./SGSSelect.vue_vue_type_script_setup_true_lang-D4rAraf9.js";const O=E({__name:"CreateUserView",setup(R){const c=g().request,l=s({isLoading:!1,isDisabled:!1}),m=s({isEmpty:!1,isDisabled:!1}),f=s({isEmpty:!1,isDisabled:!1}),d=s({isEmpty:!1,isDisabled:!1,isShort:!1}),o=s({isDisabled:!0,isEmpty:!1,notFound:!1}),p=s([]),a=s({nome:"",email:"",senha:"",tipo_usuario_id:0}),D=async()=>{await c.get("/tipo-usuario").then(e=>{e.status?(p.value=e.list,o.value.isDisabled=!1):o.value.notFound=!0})},w=()=>{const e=b(m.value,a.value.nome),v=b(f.value,a.value.email),C=V(d.value,a.value.senha),y=$(o.value,a.value.tipo_usuario_id);return e&&v&&y&&C},_=async()=>{if(n(l.value,!0),!w())return n(l.value,!1);await c.store("/usuario",a.value).then(e=>{e.status?i.show("success",e.messageCode):i.show("error",e.messageCode)}).catch(e=>{i.show("error","unexpected-error")}).finally(()=>{n(l.value,!1),U(a.value)})};return q(()=>{Promise.all([D()]).catch(e=>{console.log("Erro ao buscar dados da api"+e)}),S("Enter",_)}),(e,v)=>(P(),N(k,null,{default:t(()=>[r(x,{title:"create-user",push:{label:"list-user",to:"/user/list"}},{body:t(()=>[r(h,{label:"name",required:"",reference:a.value,referenceName:"nome",controller:m.value},null,8,["reference","controller"]),r(u),r(h,{label:"email",required:"",reference:a.value,referenceName:"email",controller:f.value},null,8,["reference","controller"]),r(u),r(G,{label:"user-type",items:p.value,track:{field:"id",name:"nome"},controller:o.value,reference:a.value,referenceName:"tipo_usuario_id",required:""},null,8,["items","controller","reference"]),r(u),r(B,{label:"password",required:"",reference:a.value,referenceName:"senha",controller:d.value},null,8,["reference","controller"])]),handler:t(()=>[r(F,{onClick:_,label:"create-user",controller:l.value},null,8,["controller"])]),_:1})]),_:1}))}});export{O as default};
