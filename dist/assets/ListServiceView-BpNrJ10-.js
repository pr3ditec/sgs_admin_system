import{d as v,u as _,r as t,T as o,o as h,i as w,w as d,e as x,f as b,b as f,h as p}from"./index-CuJsraeV.js";import{R as r}from"./Response-Ct9O502Z.js";import{_ as C}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-CoTEiKse.js";import{_ as L}from"./SGSTable.vue_vue_type_script_setup_true_lang-DT83IeVR.js";import{_ as $}from"./FormLayout.vue_vue_type_script_setup_true_lang-BqgWiiw9.js";import"./style-CGkEeH4K.js";import"./SGSInput.vue_vue_type_script_setup_true_lang-C5yR-1JN.js";import"./SGSDivider-gsGTMAMd.js";const V=v({__name:"ListServiceView",setup(D){const u=x(),l=_().request,s=t({isLoading:!1}),m=t([{field:"id",title:"#",headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"descricao",title:o.to("description"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"preco",title:o.to("price")+" (R$)",headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"actions",title:o.to("actions"),headerClass:"flex flex-row gap-1 font-bold uppercase"}]),i=t([]),n=async()=>{s.value.isLoading=!0,await l.get("/servico").then(a=>{a.status&&(i.value=a.list)}).finally(()=>{s.value.isLoading=!1})},g=async a=>{await l.destroy(`/cidade/${a}`).then(e=>{e.status?(n(),r.show("success",e.messageCode)):r.show("error",e.messageCode)})};return h(()=>{Promise.all([n()]).catch(a=>{console.log("Erro em buscar dados da api")})}),(a,e)=>(b(),w(C,null,{default:d(()=>[f($,{onHelper:e[1]||(e[1]=c=>p(r).helperList()),title:"services",push:{label:"create-service",to:"/service/create"}},{body:d(()=>[f(L,{isLoading:s.value.isLoading,result:i.value,header:m.value,onEditData:e[0]||(e[0]=c=>p(u).push(`/service/${c}`)),onDeleteData:g},null,8,["isLoading","result","header"])]),_:1})]),_:1}))}});export{V as default};
