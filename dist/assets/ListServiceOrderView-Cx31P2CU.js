import{d as x,r as f,e as w,f as b,c as C,b as l,w as g,a as u,t as v,h as n,T as a,F as k,u as D,o as y,i as S}from"./index-BNyOiFiL.js";import{g as L}from"./style-ngbkcXbr.js";import{s as $,R as m}from"./Response-CbK6wia3.js";import{_ as B}from"./SGSInput.vue_vue_type_script_setup_true_lang-CcE_Ue-L.js";import{S as O}from"./SGSDivider-CUtS6Yak.js";import{_ as E}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-BRCX2MGL.js";import{_ as G}from"./FormLayout.vue_vue_type_script_setup_true_lang-CGibbbih.js";const N={class:"flex flex-row gap-1"},R={class:"cursor-pointer w-20 flex flex-row gap-2"},T=["onClick"],V=["onClick"],q=x({__name:"SGSTableServiceOrder",props:{search:String,isLoading:Boolean,header:Array,result:Array},emits:["deleteData","editData"],setup(_,{emit:p}){const s=_,o=p,i=f({value:""}),c=r=>{$({icon:"warning",text:a.to("delete-data"),buttons:{confirm:{text:a.to("yes")}}}).then(d=>{d&&o("deleteData",r)})};return w(),(r,d)=>(b(),C(k,null,[l(B,{reference:i.value,referenceName:"value"},null,8,["reference"]),l(O),l(n(L),{rowClass:"dark:bg-form-input dark:text-zinc-300 font-bold",skin:"none",sortable:!0,columns:s.header,loading:s.isLoading,rows:s.result,search:i.value.value},{actions:g(t=>[u("div",N,[u("span",R,[u("a",{onClick:e=>o("editData",t.value.id),class:"text-sky-800 dark:text-sky-400 underline"},v(n(a).to("edit")),9,T),u("a",{onClick:e=>c(t.value.id),class:"cursor-pointer text-black-600 dark:text-orange-600 underline"},v(n(a).to("delete")),9,V)])])]),_:1},8,["columns","loading","rows","search"])],64))}}),I=x({__name:"ListServiceOrderView",setup(_){const p=w(),s=D().request,o=f({isLoading:!1}),i=f([{field:"id",title:"#",headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"numero",title:a.to("number"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"cliente.nome",title:a.to("client"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"cliente.telefone",title:a.to("phone"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"actions",title:a.to("actions"),headerClass:"flex flex-row gap-1 font-bold uppercase"}]),c=f([]),r=async()=>{o.value.isLoading=!0,await s.get("/ordem-servico").then(t=>{t.status&&(c.value=t.list)}).finally(()=>{o.value.isLoading=!1})},d=async t=>{await s.destroy(`/ordem-servico/${t}`).then(e=>{e.status?(r(),m.show("success",e.messageCode)):m.show("error",e.messageCode)})};return y(()=>{Promise.all([r()]).catch(t=>{console.log("Erro ao buscar dados de api")})}),(t,e)=>(b(),S(E,null,{default:g(()=>[l(G,{onHelper:e[1]||(e[1]=h=>n(m).helperList()),title:"service-order",push:{label:"create-service-order",to:"/service-order/create"}},{body:g(()=>[l(q,{isLoading:o.value.isLoading,header:i.value,result:c.value,onEditData:e[0]||(e[0]=h=>n(p).push(`/service-order/${h}`)),onDeleteData:d},null,8,["isLoading","header","result"])]),_:1})]),_:1}))}});export{I as default};
