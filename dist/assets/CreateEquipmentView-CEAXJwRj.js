import{d as w,u as E,r as l,o as g,i as N,w as i,f as S,b as a,h as V}from"./index-BNyOiFiL.js";import{b as $,a as u,m as x,v as c,f as k}from"./Validator-BLuEWHG9.js";import{R as s}from"./Response-CbK6wia3.js";import{_ as F}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-BRCX2MGL.js";import{_ as P}from"./FormLayout.vue_vue_type_script_setup_true_lang-CGibbbih.js";import{_ as B}from"./SGSButton.vue_vue_type_script_setup_true_lang-C_9F_a-p.js";import{_ as m}from"./SGSInput.vue_vue_type_script_setup_true_lang-CcE_Ue-L.js";import{S as f}from"./SGSDivider-CUtS6Yak.js";import{_ as G}from"./SGSSelect.vue_vue_type_script_setup_true_lang-ENLNpQU9.js";const A=w({__name:"CreateEquipmentView",setup(H){const d=E().request,t=l({isLoading:!1,isDisabled:!1}),p=l({isEmpty:!1,isDisabled:!1}),v=l({isEmpty:!1,isDisabled:!1}),_=l({isEmpty:!1,isDisabled:!1}),o=l({isEmpty:!1,notFound:!1,isDisabled:!0}),b=l([]),r=l({numero_serie:"",nome:"",tipo:"",cliente_id:0}),q=()=>{const e=c(p.value,r.value.numero_serie),n=c(v.value,r.value.nome),h=c(_.value,r.value.tipo),y=k(o.value,r.value.cliente_id);return n&&h&&y&&e},D=async()=>{await d.get("/cliente").then(e=>{e.status?(b.value=e.list,o.value.isDisabled=!1):o.value.notFound=!0})},C=async()=>{if(u(t.value,!0),!q())return u(t.value,!1);await d.store("/aparelho",r.value).then(e=>{e.status?s.show("success",e.messageCode):s.show("error",e.messageCode)}).catch(e=>{s.show("error","unexpected-error")}).finally(()=>{u(t.value,!1),x(r.value)})};return g(()=>{Promise.all([D()]).catch(e=>{console.log("Erro ao buscar dados de api")}),$("Enter",C)}),(e,n)=>(S(),N(F,null,{default:i(()=>[a(P,{onHelper:n[0]||(n[0]=h=>V(s).helperCreateFormOrder("register-equipment-helper-text")),title:"create-equipment",push:{label:"list-equipment",to:"/equipment/list"}},{body:i(()=>[a(m,{label:"serial-number",required:"",reference:r.value,referenceName:"numero_serie",controller:p.value},null,8,["reference","controller"]),a(f),a(m,{label:"name",required:"",reference:r.value,referenceName:"nome",controller:v.value},null,8,["reference","controller"]),a(f),a(m,{label:"type",required:"",reference:r.value,referenceName:"tipo",controller:_.value},null,8,["reference","controller"]),a(f),a(G,{label:"client",items:b.value,track:{field:"id",name:"nome"},controller:o.value,reference:r.value,referenceName:"cliente_id",required:""},null,8,["items","controller","reference"])]),handler:i(()=>[a(B,{onClick:C,label:"create-equipment",controller:t.value},null,8,["controller"])]),_:1})]),_:1}))}});export{A as default};
