import{d as O,u as P,r as o,p as E,o as J,i as y,w as n,f as C,a as s,t as V,h as D,T as S,l as j,H as $,b as l,k as X}from"./index-DcHHFHWs.js";import{b as Q,a as N,l as W,v as m}from"./Validator-BLuEWHG9.js";import{R as p,a as Y}from"./Response-CeNjMucE.js";import{_ as Z}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-DbfjE3bo.js";import{_ as B}from"./FormLayout.vue_vue_type_script_setup_true_lang-C1zYCnRE.js";import{_ as F}from"./SGSButton.vue_vue_type_script_setup_true_lang-TC2PI5U5.js";import{_ as a}from"./SGSInput.vue_vue_type_script_setup_true_lang-CmQpmTuy.js";import{S as i}from"./SGSDivider-DtGz0GqX.js";import{S as G}from"./SGSAddress-D1z3wdBG.js";const ee={class:"flex flex-col items-center"},le={class:"flex flex-row gap-2 mx-auto"},re={class:"flex-row"},ae={class:"flex-row"},oe={class:"flex-row"},ne={class:"flex-row"},se=O({__name:"CreateClientView",setup(te){const k=P().request,c=o(0),f=o({isLoading:!1,isDisabled:!1}),v=o({isEmpty:!1,isDisabled:!1}),b=o({isEmpty:!1,isDisabled:!1}),_=o({isEmpty:!1,isDisabled:!1}),q=o({isEmpty:!1,isDisabled:!1}),h=o({isEmpty:!1,isDisabled:!1}),w=o({isEmpty:!1,isDisabled:!1}),H=o({isDisabled:!1,isEmpty:!1}),M=o({isDisabled:!1,isEmpty:!1}),R=o({isDisabled:!1,isEmpty:!1}),T=o({isDisabled:!1,isEmpty:!1}),x=o({isDisabled:!1,isEmpty:!1});o([]);const e=o({nome:"",logradouro:"",cep:"",complemento:"",numero:"",telefone:"",cidade:"",usuario_id:0});var t={};const z=async()=>{t={...e.value};try{t.cpf=t.cpf.replace(/\D/g,"")}catch{try{t.cnpj=t.cnpj.replace(/\D/g,"")}catch{}}return t.cep=t.cep.replace(/\D/g,""),t.telefone=t.telefone.replace(/\D/g,""),t},I=()=>{const u=m(v.value,e.value.nome),r=m(b.value,e.value.logradouro),d=m(_.value,e.value.cep),U=m(h.value,e.value.numero),A=m(w.value,e.value.cidade),K=!(!e.value.cpf&&!e.value.cnpj);return u&&r&&d&&U&&A&&K},g=async()=>{N(f.value,!0);const u=await z();if(!I())return N(f.value,!1);await k.store("/cliente",u).then(r=>{console.log(r),r.status?p.show("success",r.messageCode):p.show("error",r.messageCode)}).catch(r=>{p.show("error","unexpected-error")}).finally(()=>{N(f.value,!1),W(e.value)})},L=async()=>{if(e.value.cep.length<9)return;const u=e.value.cep.replace(/\D/g,"");await k.get(`https://viacep.com.br/ws/${u}/json/`).then(r=>{console.log(r),e.value.logradouro=r.logradouro,e.value.cidade=r.localidade}).catch(r=>{console.log("Erro ao buscar dados de cep")})};return E(()=>e.value.cep,()=>L()),E(c,()=>{c.value==1?delete e.value.cpf:(delete e.value.cnpj,delete e.value.inscricao_estadual,delete e.value.inscricao_municipal)}),J(()=>{Q("Enter",g),e.value.usuario_id=1}),(u,r)=>(C(),y(Z,null,{default:n(()=>[s("div",ee,[r[3]||(r[3]=s("p",null,[s("strong",null,"Selecione o tipo de pessoa")],-1)),s("div",le,[s("label",null,V(D(S).to("normal-person")),1),j(s("input",{type:"radio",name:"register","onUpdate:modelValue":r[0]||(r[0]=d=>c.value=d),value:"0"},null,512),[[$,c.value]]),s("label",null,V(D(S).to("juridic-person")),1),j(s("input",{type:"radio",name:"register","onUpdate:modelValue":r[1]||(r[1]=d=>c.value=d),value:"1"},null,512),[[$,c.value]])])]),c.value==0?(C(),y(B,{key:0,onHelper:r[2]||(r[2]=d=>D(p).helperCreateFormOrder("register-client-helper-text")),title:"create-client",push:{label:"list-client",to:"/client/list"}},{body:n(()=>[s("div",re,[l(a,{class:"small-width",label:"name",required:"",reference:e.value,referenceName:"nome",controller:v.value},null,8,["reference","controller"]),l(i),l(a,{class:"small-width1",label:"phone",mask:"(##)#####-####",required:"",reference:e.value,referenceName:"telefone",controller:x.value},null,8,["reference","controller"]),l(i),l(a,{class:"small-width2",mask:"#####-###",label:"cep",required:"",reference:e.value,referenceName:"cep",controller:_.value},null,8,["reference","controller"])]),l(G,null,{cep:n(()=>r[4]||(r[4]=[])),logradouro:n(()=>[l(a,{class:"small-width3",label:"logradouro",required:"",reference:e.value,referenceName:"logradouro",controller:b.value},null,8,["reference","controller"])]),numero:n(()=>[l(a,{class:"small-width2",label:"number",mask:"XXXXX",required:"",reference:e.value,referenceName:"numero",controller:h.value},null,8,["reference","controller"])]),cidade:n(()=>[l(a,{class:"small-width3",label:"city",controller:w.value,reference:e.value,referenceName:"cidade",required:""},null,8,["controller","reference"])]),_:1}),l(i),s("div",ae,[l(a,{class:"small-width4",label:"complement",reference:e.value,referenceName:"complemento",controller:q.value},null,8,["reference","controller"]),l(a,{label:"cpf",mask:"###.###.###-##",reference:e.value,referenceName:"cpf",controller:H.value,required:""},null,8,["reference","controller"])])]),handler:n(()=>[l(F,{onClick:g,label:"create-client",controller:f.value},null,8,["controller"])]),_:1})):X("",!0),c.value==1?(C(),y(B,{key:1,title:"create-client",push:{label:"list-client",to:"/client/list"}},{body:n(()=>[s("div",oe,[l(a,{class:"small-width",label:"name",required:"",reference:e.value,referenceName:"nome",controller:v.value},null,8,["reference","controller"]),l(i),l(a,{class:"small-width1",label:"phone",mask:"(##)#####-####",required:"",reference:e.value,referenceName:"telefone",controller:x.value},null,8,["reference","controller"]),l(i),l(a,{class:"small-width2",mask:"#####-###",label:"cep",required:"",reference:e.value,referenceName:"cep",controller:_.value},null,8,["reference","controller"])]),l(G,null,{cep:n(()=>r[5]||(r[5]=[])),logradouro:n(()=>[l(a,{class:"small-width3",label:"logradouro",required:"",reference:e.value,referenceName:"logradouro",controller:b.value},null,8,["reference","controller"])]),numero:n(()=>[l(a,{class:"small-width2",label:"number",mask:"#####",required:"",reference:e.value,referenceName:"numero",controller:h.value},null,8,["reference","controller"])]),cidade:n(()=>[l(a,{class:"small-width3",label:"city",controller:w.value,reference:e.value,referenceName:"cidade",required:""},null,8,["controller","reference"])]),default:n(()=>[l(a,{label:"complement",reference:e.value,referenceName:"complemento",controller:q.value},null,8,["reference","controller"])]),_:1}),l(i),s("div",ne,[l(a,{class:"small-width3",label:"cnpj",mask:"##.###.###/####-##",reference:e.value,referenceName:"cnpj",controller:M.value,required:""},null,8,["reference","controller"]),l(i),l(a,{class:"small-width3",label:"state-register",mask:"###############",reference:e.value,referenceName:"inscricao_estadual",controller:R.value},null,8,["reference","controller"]),l(i),l(a,{class:"small-width3",label:"local-register",mask:"###############",reference:e.value,referenceName:"inscricao_municipal",controller:T.value},null,8,["reference","controller"])])]),handler:n(()=>[l(F,{onClick:g,label:"create-client",controller:f.value},null,8,["controller"])]),_:1})):X("",!0)]),_:1}))}}),_e=Y(se,[["__scopeId","data-v-f7de64f8"]]);export{_e as default};
