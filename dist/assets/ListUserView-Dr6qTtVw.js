import{d as _,u as g,r as o,T as s,o as h,i as x,w as n,e as w,f as b,b as u,h as C}from"./index-DlXReHYW.js";import{R as d}from"./Response-Degt4AJ1.js";import{_ as L}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-CMILcdRT.js";import{_ as v}from"./SGSTable.vue_vue_type_script_setup_true_lang-Btn_6s8H.js";import{_ as y}from"./FormLayout.vue_vue_type_script_setup_true_lang-2C9QneGZ.js";import"./style-Gbs5m0IT.js";import"./SGSInput.vue_vue_type_script_setup_true_lang-B8Bwi16F.js";import"./SGSDivider-Bofd5NDC.js";const V=_({__name:"ListUserView",setup(D){const f=w(),r=g().request,t=o({isLoading:!1}),p=o([{field:"id",title:"#",headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"nome",title:s.to("name"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"email",title:s.to("email"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"tipo_usuario_nome",title:s.to("user-type"),headerClass:"flex flex-row gap-1 font-bold uppercase"},{field:"actions",title:s.to("actions"),headerClass:"flex flex-row gap-1 font-bold uppercase"}]),l=o([]),i=async()=>{t.value.isLoading=!0,await r.get("/usuario").then(e=>{e.status&&(l.value=e.list)}).finally(()=>{t.value.isLoading=!1})},c=async e=>{await r.destroy(`/usuario/${e}`).then(a=>{a.status?(i(),d.show("success",a.messageCode)):d.show("error",a.messageCode)})};return h(()=>{Promise.all([i()]).catch(e=>{console.log("Erro em buscar dados da api")})}),(e,a)=>(b(),x(L,null,{default:n(()=>[u(y,{title:"users",push:{label:"create-user",to:"/user/create"}},{body:n(()=>[u(v,{isLoading:t.value.isLoading,header:p.value,result:l.value,onEditData:a[0]||(a[0]=m=>C(f).push(`/users/${m}`)),onDeleteData:c},null,8,["isLoading","header","result"])]),_:1})]),_:1}))}});export{V as default};
